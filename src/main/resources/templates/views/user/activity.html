<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="https://unpkg.com/lucide@latest"></script>
        <title>내 활동</title>
    </head>
    
    <body class="bg-gray-50">
        <div th:replace="~{/fragments/navigation :: navigation(${user})}"></div>
        
        <!-- 페이지 배너 -->
        <div class="w-full bg-gradient-to-r from-gray-800 to-gray-900 text-white py-12 px-4">
            <div class="container mx-auto">
                <div class="flex items-center space-x-3">
                    <i data-lucide="activity" class="w-8 h-8"></i>
                    <h1 class="text-3xl font-bold">내 활동</h1>
                </div>
                <p class="mt-2 text-gray-300">북마크와 작성한 글, 댓글을 확인하세요</p>
            </div>
        </div>
        
        <!-- 메인 컨텐츠 -->
        <div class="container mx-auto px-4 py-8">
            <!-- 탭 네비게이션 -->
            <div id="activity-tab-navigation"
                 class="bg-white rounded-lg shadow-md overflow-hidden mb-6">
                <ul class="flex border-b border-gray-200" id="activityTab" role="tablist">
                    <li class="flex-1" role="presentation">
                        <button class="w-full flex items-center justify-center space-x-2 px-4 py-4 text-gray-800 font-semibold border-b-2 border-gray-800 bg-gray-50 transition hover:bg-gray-100"
                                id="bookmarks-tab"
                                data-bs-toggle="tab"
                                data-bs-target="#bookmark-list"
                                type="button"
                                role="tab"
                                aria-controls="bookmarks"
                                aria-selected="true">
                            <i data-lucide="bookmark" class="w-5 h-5"></i>
                            <span>북마크</span>
                        </button>
                    </li>
                    <li class="flex-1" role="presentation">
                        <button class="w-full flex items-center justify-center space-x-2 px-4 py-4 text-gray-500 font-semibold border-b-2 border-transparent transition hover:bg-gray-50 hover:text-gray-800"
                                id="posts-tab"
                                data-bs-toggle="tab"
                                data-bs-target="#userPostList"
                                type="button"
                                role="tab"
                                aria-controls="posts"
                                aria-selected="false">
                            <i data-lucide="file-text" class="w-5 h-5"></i>
                            <span>작성한 글</span>
                        </button>
                    </li>
                    <li class="flex-1" role="presentation">
                        <button class="w-full flex items-center justify-center space-x-2 px-4 py-4 text-gray-500 font-semibold border-b-2 border-transparent transition hover:bg-gray-50 hover:text-gray-800"
                                id="comments-tab"
                                data-bs-toggle="tab"
                                data-bs-target="#repliedPostList"
                                type="button"
                                role="tab"
                                aria-controls="comments"
                                aria-selected="false">
                            <i data-lucide="message-circle" class="w-5 h-5"></i>
                            <span>댓글 단 글</span>
                        </button>
                    </li>
                </ul>
            </div>
            
            <!-- 탭 컨텐츠 -->
            <div id="activityTabContent">
                <!-- 북마크 탭 -->
                <div class="block"
                     id="bookmark-list"
                     role="tabpanel"
                     aria-labelledby="bookmarks-tab"
                     th:fragment="bookmarkList"
                     th:with="bookmarks=${bookmarks},
                              bookmarkPagination=${bookmarkPagination}">
                    
                    <div th:if="${#lists.isEmpty(bookmarks)}"
                         class="bg-white rounded-lg shadow-md p-16 text-center">
                        <i data-lucide="bookmark" class="w-16 h-16 mx-auto text-gray-400 mb-4"></i>
                        <p class="text-xl font-semibold text-gray-700 mb-2">북마크한 게시글이 없습니다</p>
                        <p class="text-gray-500">관심있는 게시글을 북마크해보세요!</p>
                    </div>
                    
                    <div class="space-y-3" th:if="${!#lists.isEmpty(bookmarks)}">
                        <a class="block bg-white rounded-lg shadow-sm hover:shadow-md transition p-4 border border-gray-200 hover:border-gray-300"
                           th:each="bookmark: ${bookmarks}"
                           th:href="@{'/post/' + ${bookmark.id}}">
                            
                            <!-- 게시글 제목 -->
                            <h3 class="text-lg font-bold text-gray-800 mb-2 line-clamp-1"
                                th:text="${bookmark.title}">게시글 제목</h3>
                            
                            <!-- 태그 -->
                            <div class="flex flex-wrap gap-2 mb-3">
                                <span class="inline-flex items-center px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded"
                                      th:each="tag:${bookmark.tags}"
                                      th:text="${tag.name}">태그명</span>
                            </div>
                            
                            <!-- 메타 정보 -->
                            <div class="flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-gray-500">
                                <!-- 게시판 이름 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="layout-grid" class="w-4 h-4"></i>
                                    커뮤니티
                                </div>
                                
                                <!-- 카테고리 이름 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="folder" class="w-4 h-4"></i>
                                    <span th:text="${bookmark.categoryName}">자유</span>
                                </div>
                                
                                <!-- 댓글 수 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="message-circle" class="w-4 h-4"></i>
                                    <span th:text="${bookmark.answerCount}">0</span>
                                </div>
                                
                                <!-- 좋아요 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="heart" class="w-4 h-4"></i>
                                    <span th:text="${bookmark.likes}">0</span>
                                </div>
                                
                                <!-- 조회수 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="eye" class="w-4 h-4"></i>
                                    <span th:text="${bookmark.views}">0</span>
                                </div>
                                
                                <!-- 작성자 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="user" class="w-4 h-4"></i>
                                    <span th:text="${bookmark.anonymous ? '익명' : bookmark.authorNickname}">글쓴이</span>
                                </div>
                                
                                <!-- 작성시간 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="clock" class="w-4 h-4"></i>
                                    <span class="timeago" th:data-date="${bookmark.createdAt}">1시간 전</span>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div th:replace="~{/fragments/pagination::pagination('bookmark-pagination' ,${bookmarkPagination})}"></div>
                </div>
                
                
                <!-- 작성한 글 탭 -->
                <div class="hidden"
                     id="userPostList"
                     role="tabpanel"
                     aria-labelledby="posts-tab"
                     th:fragment="userPostList"
                     th:with="myPosts=${myPosts},
                              myPostPagination=${myPostPagination}">
                    
                    <div th:if="${#lists.isEmpty(myPosts)}"
                         class="bg-white rounded-lg shadow-md p-16 text-center">
                        <i data-lucide="file-text" class="w-16 h-16 mx-auto text-gray-400 mb-4"></i>
                        <p class="text-xl font-semibold text-gray-700 mb-2">작성한 게시글이 없습니다</p>
                        <p class="text-gray-500">첫 번째 글을 작성해보세요!</p>
                    </div>
                    
                    <div class="space-y-3" th:if="${!#lists.isEmpty(myPosts)}">
                        <a class="block bg-white rounded-lg shadow-sm hover:shadow-md transition p-4 border border-gray-200 hover:border-gray-300"
                           th:each="post: ${myPosts}"
                           th:href="@{'/post/' + ${post.id}}">
                            
                            <!-- 게시글 제목 -->
                            <h3 class="text-lg font-bold text-gray-800 mb-2 line-clamp-1"
                                th:text="${post.title}">게시글 제목</h3>
                            
                            <!-- 태그 -->
                            <div class="flex flex-wrap gap-2 mb-3">
                                <span class="inline-flex items-center px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded"
                                      th:each="tag:${post.tags}"
                                      th:text="${tag.name}">태그명</span>
                            </div>
                            
                            <!-- 메타 정보 -->
                            <div class="flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-gray-500">
                                <!-- 게시판 이름 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="layout-grid" class="w-4 h-4"></i>
                                    커뮤니티
                                </div>
                                
                                <!-- 카테고리 이름 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="folder" class="w-4 h-4"></i>
                                    <span th:text="${post.categoryName}">자유</span>
                                </div>
                                
                                <!-- 댓글 수 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="message-circle" class="w-4 h-4"></i>
                                    <span th:text="${post.answerCount}">0</span>
                                </div>
                                
                                <!-- 좋아요 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="heart" class="w-4 h-4"></i>
                                    <span th:text="${post.likes}">0</span>
                                </div>
                                
                                <!-- 조회수 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="eye" class="w-4 h-4"></i>
                                    <span th:text="${post.views}">0</span>
                                </div>
                                
                                <!-- 작성자 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="user" class="w-4 h-4"></i>
                                    <span th:text="${post.anonymous ? '익명' : post.authorNickname}">글쓴이</span>
                                </div>
                                
                                <!-- 작성시간 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="clock" class="w-4 h-4"></i>
                                    <span class="timeago" th:data-date="${post.createdAt}">1시간 전</span>
                                </div>
                            </div>
                        </a>
                    </div>
                    
                    <div th:replace="~{/fragments/pagination::pagination('my-post-pagination',${myPostPagination})}"></div>
                </div>
                
                <!-- 댓글 단 글 탭 -->
                <div class="hidden"
                     id="repliedPostList"
                     role="tabpanel"
                     aria-labelledby="comments-tab"
                     th:fragment="repliedPostList"
                     th:with="repliedPosts=${replied},
                              repliedPagination=${repliedPagination}">
                    
                    <div th:if="${#lists.isEmpty(repliedPosts)}"
                         class="bg-white rounded-lg shadow-md p-16 text-center">
                        <i data-lucide="message-circle" class="w-16 h-16 mx-auto text-gray-400 mb-4"></i>
                        <p class="text-xl font-semibold text-gray-700 mb-2">작성한 댓글이 없습니다</p>
                        <p class="text-gray-500">게시글에 댓글을 남겨보세요!</p>
                    </div>
                    
                    <div class="space-y-3" th:if="${!#lists.isEmpty(repliedPosts)}">
                        <a class="block bg-white rounded-lg shadow-sm hover:shadow-md transition p-4 border border-gray-200 hover:border-gray-300"
                           th:each="post: ${repliedPosts}"
                           th:href="@{'/post/' + ${post.id}}">
                            
                            <!-- 게시글 제목 -->
                            <h3 class="text-lg font-bold text-gray-800 mb-2 line-clamp-1"
                                th:text="${post.title}">게시글 제목</h3>
                            
                            <!-- 태그 -->
                            <div class="flex flex-wrap gap-2 mb-3">
                                <span class="inline-flex items-center px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded"
                                      th:each="tag:${post.tags}"
                                      th:text="${tag.name}">태그명</span>
                            </div>
                            
                            <!-- 메타 정보 -->
                            <div class="flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-gray-500">
                                <!-- 게시판 이름 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="layout-grid" class="w-4 h-4"></i>
                                    커뮤니티
                                </div>
                                
                                <!-- 카테고리 이름 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="folder" class="w-4 h-4"></i>
                                    <span th:text="${post.categoryName}">자유</span>
                                </div>
                                
                                <!-- 댓글 수 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="message-circle" class="w-4 h-4"></i>
                                    <span th:text="${post.answerCount}">0</span>
                                </div>
                                
                                <!-- 좋아요 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="heart" class="w-4 h-4"></i>
                                    <span th:text="${post.likes}">0</span>
                                </div>
                                
                                <!-- 조회수 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="eye" class="w-4 h-4"></i>
                                    <span th:text="${post.views}">0</span>
                                </div>
                                
                                <!-- 작성자 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="user" class="w-4 h-4"></i>
                                    <span th:text="${post.anonymous ? '익명' : post.authorNickname}">글쓴이</span>
                                </div>
                                
                                <!-- 작성시간 -->
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="clock" class="w-4 h-4"></i>
                                    <span class="timeago" th:data-date="${post.createdAt}">1시간 전</span>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div th:replace="~{/fragments/pagination::pagination('reply-pagination', ${repliedPagination})}"></div>
                </div>
            </div>
        </div>
        <div th:replace="~{/fragments/footer :: default-footer}"></div>
        
        <script type="module">
            import * as userActivityUI from '/js/user/ui/userActivityUI.js';

            document.addEventListener('DOMContentLoaded', async function ()
            {
                userActivityUI.init();

                lucide.createIcons();
            });
        </script>
    </body>
</html>
